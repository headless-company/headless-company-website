---
import Logo from "../assets/headless-logo-boxed.svg";
import Phone from "../assets/icon-phone.svg";
---

<div class="navigationWrapper">
    <nav class="top">
        <div class="inner">
            <a href="/" class="logo">
                <Logo />
            </a>
            <a
                href="https://outlook.office.com/book/Letsstartadiscussion@headless.company/?ismsaljsauthenabled"
                class="button"
            >
                <Phone />
                Book a call</a
            >
        </div>
    </nav>
</div>

<style>
    .navigationWrapper {
        position: fixed;
        top: 0;
        z-index: 2;
        width: 100%;
        height: 0;
        overflow: visible;
    }
    nav.top {
        width: 100%;
        padding: 2rem;
        backdrop-filter: blur(0.75rem);
        --linkColor: var(--color-black);
        --buttonColor: var(--color-black);
        --buttonText: var(--color-red);
        --buttonHover: var(--color-red);
        --buttonHoverText: var(--color-white);
    }
    nav.top.light {
        --linkColor: var(--color-white);
        --buttonColor: var(--color-white);
        --buttonText: var(--color-red);
        --buttonHover: var(--color-black);
        --buttonHoverText: var(--color-red);
    }
    nav.top.red {
        --linkColor: var(--color-red);
        --buttonColor: var(--color-red);
        --buttonText: var(--color-white);
        --buttonHover: var(--color-black);
        --buttonHoverText: var(--color-white);
    }
    .inner {
        display: flex;
        flex-wrap: none;
        flex-direction: row;
    }

    a {
        color: var(--linkColor);
    }

    .logo svg {
        display: block;
        width: 3rem;
        height: 3rem;
    }

    a.button,
    a.button:link {
        margin-left: auto;
        padding: 1rem 2rem;
        background: var(--buttonColor);
        color: var(--buttonText);
    }
    a.button:hover,
    a.button:active {
        background: var(--buttonHover);
        color: var(--buttonHoverText);
    }

    .button svg {
        display: inline-block;
        width: 1.25rem;
        height: 1.25rem;
        margin-right: 0.3rem;
        transform: translateY(0.2em);
    }

    .light a.button,
    .light a.button:link {
        opacity: 0;
        pointer-events: none;
    }

    @media screen and (max-width: 40rem) {
        nav.top {
            padding: 1rem 2rem;
        }
    }
</style>

<script>
    const changeNavColor = () => {
        const scrollPosition = window.scrollY;
        const sections = document.querySelectorAll("section");

        sections.forEach((section, index) => {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.clientHeight;

            if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                const sectionClass = section.classList[0];
                const nav = document.querySelector("nav.top");

                nav.classList.remove("light", "red", "hero");

                if (["hero", "prefooter"].includes(sectionClass)) {
                    nav.classList.add("light");
                } else if (["challenge", "services", "engagementModels"].includes(sectionClass)) {
                    nav.classList.add("red");
                }
            }
        });
    };

    window.addEventListener("load", () => changeNavColor());
    window.addEventListener("scroll", () => changeNavColor());
</script>
